import React, { Component } from 'react';
import { StyleSheet, Text, View, Platform, StatusBar, TouchableOpacity}  from 'react-native';
import { Container, Content, Form, Header, Left, Right, Icon, } from 'native-base';
import { AppLoading } from 'expo';
import * as Font from 'expo-font';

export default class AddSubscription extends Component {

  constructor() {
    super();
    this.state = {
      fontsLoaded: false,
      subscriptionName: null,
      dateNotify:null
    };

  }
  setsubscriptionName =(value)=>{
      this.setState({subscriptionName: value});
  }
  setdateNotify =(value)=>{
      this.setState({dateNotify:value})
  }
  save_data =()=>{
      if(this.state.subscriptionName && this.state.dateNotify){
          AddSubscription(this.state.subscriptionName,this.state.dateNotify)
      }
  }

  async componentDidMount() {
    await Font.loadAsync({
        'Simplifica': require('../assets/fonts/Simplifica/SIMPLIFICA.ttf'),      
    });

    this.setState({ fontsLoaded: true });
  }

  render() {
    const {fontsLoaded} = this.state;

    if(fontsLoaded) {
      return (
        <Container>    
            <Header  style={[styles.header, styles.androidHeader]} 
                     iosBarStyle={"light-content"} 
                     androidStatusBarColor='#000'>

                <Left style={{flexDirection: 'row', paddingBottom: 20}}>
                     <Icon name='arrow-back' 
                           style={{color: 'black', marginLeft: 10}}
                     />
                 </Left >

                <Right style={styles.right}>
                    <Text>Log Out</Text>
                </Right>

            </Header>
          <Content padder>
            {/* <View style={styles.container}> */}
                <View style={styles.titleView}>
                  <Text style={styles.title}>ADD NEW SUBSCRIPTION</Text>
                </View>
                <View>
                  <Form>
                    <TextInput  style={styles.input}
                                autoCapitalize='none'
                                autoCorrect={false} 
                                placeholder='Subscription Name'
                                onChangeText={this.setsubscriptionName}/>

                    <TextInput  style={styles.input}
                                autoCapitalize='none'
                                autoCorrect={false} 
                                placeholder='Date'
                                onChangeText={this.setdateNotify}/>
    
                  </Form>
                </View>
                
                <View style={styles.btnView}>
                  <TouchableOpacity style= {styles.button}>
                    <Text style= {{color: 'white'}}>CANCEL</Text>
                  </TouchableOpacity>

                  <TouchableOpacity style= {styles.button} onPress={this.save_data}>
                    <Text style= {{color: 'white'}}>SAVE</Text>
                  </TouchableOpacity>
                </View>

        
            {/* </View> */}
            </Content>
          
        </Container>
      );
  }
  else return <AppLoading/>;
}

}

const styles = StyleSheet.create({
  header: {
    backgroundColor: '#FFF',
  },
  androidHeader: {
      ...Platform.select({
            android: {
                paddingTop: StatusBar.currentHeight,
            }
        })         
  },
  right: {
    paddingBottom:20, 
    paddingRight: 10,
    alignItems: 'center', 
    fontWeight: 'bold',
    textAlign: 'center'
},
  titleView: {
    backgroundColor: 'purple', 
    width: '100%', 
    alignItems: 'center',
    marginBottom: 20,
  },
  title: {
    alignItems: 'center',
    justifyContent: 'center', 
    fontFamily: 'Simplifica',
    fontSize: 40,
    padding: 5,
    color: '#FFF'
  },
  label: {
    fontWeight: 'bold',
    marginBottom: 7,
    color: '#431d69'
  },
  button: {
    width: 155,
    textAlign: 'center',
    alignItems: 'center',
    backgroundColor: 'purple',
    padding: 10,
    borderRadius: 15,
    marginBottom: 20
  },
  btnView: {
    marginTop:20, 
    flexDirection: 'row', 
    justifyContent:'space-between', 
    paddingHorizontal: 20
  }
});
